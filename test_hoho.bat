@echo off
chcp 65001 >nul
title –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ hiho - –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–∞—Ä–æ–ª–µ–π —É—Ä–æ–≤–Ω—è NSA

cls
echo ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
echo ‚ïë                    üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï HIHO                    ‚ïë
echo ‚ïë              –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–∞—Ä–æ–ª–µ–π —É—Ä–æ–≤–Ω—è NSA/Pentagon           ‚ïë
echo ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
echo.

:: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è Rust –∏ Cargo
where cargo >nul 2>nul
if %errorlevel% neq 0 (
    echo ‚ùå –û—à–∏–±–∫–∞: Rust –∏ Cargo –Ω–µ –Ω–∞–π–¥–µ–Ω—ã!
    echo    –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Rust —Å https://www.rust-lang.org/
    echo.
    pause
    exit /b 1
)

echo ‚úÖ Rust –∏ Cargo –Ω–∞–π–¥–µ–Ω—ã
echo.

:: –°–æ–∑–¥–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø–∞–ø–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
set TEST_DIR=%TEMP%\hiho_test_%RANDOM%
mkdir "%TEST_DIR%" >nul 2>nul
echo üìÅ –°–æ–∑–¥–∞–Ω–∞ –≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–ø–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤: %TEST_DIR%
echo.

:: –ü–µ—Ä–µ—Ö–æ–¥ –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–∞–ø–∫—É
cd /d "%TEST_DIR%"

:: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ (–ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞)
echo üìÇ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞...
xcopy "%~dp0src" "src\" /E /I /Q >nul 2>nul
copy "%~dp0Cargo.toml" . >nul 2>nul
copy "%~dp0Cargo.lock" . >nul 2>nul

echo ‚úÖ –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω
echo.

:: –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
echo üîß –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞...
cargo build --release > build_log.txt 2>&1
if %errorlevel% neq 0 (
    echo ‚ùå –û—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏!
    type build_log.txt
    echo.
    pause
    exit /b 1
)

echo ‚úÖ –ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–±—Ä–∞–Ω
echo.

:: –ü—É—Ç—å –∫ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–º—É —Ñ–∞–π–ª—É
set HIHO_EXE=%TEST_DIR%\target\release\hiho.exe

:: –¢–µ—Å—Ç 1: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
echo üîê –¢–µ—Å—Ç 1: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
echo –¢–µ—Å—Ç–æ–≤—ã–π –º–∞—Å—Ç–µ—Ä-–ø–∞—Ä–æ–ª—å: TestMasterPassword123!
echo TestMasterPassword123! | "%HIHO_EXE%" init
if %errorlevel% equ 0 (
    echo ‚úÖ –¢–µ—Å—Ç 1 –ø—Ä–æ–π–¥–µ–Ω: –•—Ä–∞–Ω–∏–ª–∏—â–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ
) else (
    echo ‚ùå –¢–µ—Å—Ç 1 –ø—Ä–æ–≤–∞–ª–µ–Ω: –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
)
echo.

:: –¢–µ—Å—Ç 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π
echo ‚ûï –¢–µ—Å—Ç 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π
echo TestMasterPassword123! | "%HIHO_EXE%" add -n "github.com" -u "developer@github.com" -p "MyGitHubPass123!"
if %errorlevel% equ 0 (
    echo ‚úÖ –¢–µ—Å—Ç 2.1: –ó–∞–ø–∏—Å—å github.com –¥–æ–±–∞–≤–ª–µ–Ω–∞
) else (
    echo ‚ùå –¢–µ—Å—Ç 2.1: –û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ github.com
)

echo TestMasterPassword123! | "%HIHO_EXE%" add -n "google.com" -u "user@gmail.com" --length 16
if %errorlevel% equ 0 (
    echo ‚úÖ –¢–µ—Å—Ç 2.2: –ó–∞–ø–∏—Å—å google.com –¥–æ–±–∞–≤–ª–µ–Ω–∞
) else (
    echo ‚ùå –¢–µ—Å—Ç 2.2: –û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ google.com
)
echo.

:: –¢–µ—Å—Ç 3: –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–ø–∏—Å–µ–π
echo üìã –¢–µ—Å—Ç 3: –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–ø–∏—Å–µ–π
echo TestMasterPassword123! | "%HIHO_EXE%" list
if %errorlevel% equ 0 (
    echo ‚úÖ –¢–µ—Å—Ç 3: –ó–∞–ø–∏—Å–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω—ã
) else (
    echo ‚ùå –¢–µ—Å—Ç 3: –û—à–∏–±–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π
)
echo.

:: –¢–µ—Å—Ç 4: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∞—Ä–æ–ª–µ–π
echo üî§ –¢–µ—Å—Ç 4: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∞—Ä–æ–ª–µ–π
"%HIHO_EXE%" generate --length 12
if %errorlevel% equ 0 (
    echo ‚úÖ –¢–µ—Å—Ç 4.1: –ü—Ä–æ—Å—Ç–æ–π –ø–∞—Ä–æ–ª—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω
) else (
    echo ‚ùå –¢–µ—Å—Ç 4.1: –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ—Å—Ç–æ–≥–æ –ø–∞—Ä–æ–ª—è
)

"%HIHO_EXE%" generate --length 16 --secure
if %errorlevel% equ 0 (
    echo ‚úÖ –¢–µ—Å—Ç 4.2: –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–∞—Ä–æ–ª—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω
) else (
    echo ‚ùå –¢–µ—Å—Ç 4.2: –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è
)
echo.

:: –¢–µ—Å—Ç 5: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
echo üìã –¢–µ—Å—Ç 5: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
echo TestMasterPassword123! | "%HIHO_EXE%" copy 1
if %errorlevel% equ 0 (
    echo ‚úÖ –¢–µ—Å—Ç 5: –ü–∞—Ä–æ–ª—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
) else (
    echo ‚ùå –¢–µ—Å—Ç 5: –û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
)
echo.

:: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö
echo üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø:
echo    ‚úÖ –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
echo    üìÅ –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤: %TEST_DIR%
echo    üóëÔ∏è  –î–ª—è –æ—á–∏—Å—Ç–∫–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ: rmdir /s "%TEST_DIR%"
echo.

echo üéâ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!
echo.
pause